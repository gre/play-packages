# Maintainer: Gaetan Renaudeau <gre at zenexity dot com>
pkgname=playframework
pkgver=1.1.1
pkgrel=5
pkgdesc="An open source web application framework in Java which follows the MVC pattern."
url="http://www.playframework.org/"
arch=('any')
license=('APACHE')
depends=('jdk' 'python2')
backup=()
source=(http://download.playframework.org/releases/play-${pkgver}.zip 
        python2fix.patch 
        play_completion)
md5sums=('3a2a49cfcc0ea679c75d3c1cb34ec080' 
         '967a191ca673aec93546640002c794ab' 
         '85b6329521914b6ffaf6c35f4944ce21')

provides=()
conflicts=()
optdepends=('apache-ant: A java-based build tool used to compile play framework.'
            'bash-completion: To have a bash completion on play command.')

package() {
  mkdir -p $pkgdir/usr/share/
  mkdir -p $pkgdir/usr/share/licenses/$pkgname
  mkdir -p $pkgdir/usr/bin/
  mkdir -p $pkgdir/etc/bash_completion.d/
  cp -R $srcdir/play-${pkgver} $pkgdir/usr/share/playframework-${pkgver}
  cp $srcdir/play-${pkgver}/COPYING $pkgdir/usr/share/licenses/$pkgname/LICENSE
  cp $srcdir/play_completion $pkgdir/etc/bash_completion.d/
  
  # the python env is python2 on Arch Linux
  patch $pkgdir/usr/share/playframework-${pkgver}/play $srcdir/python2fix.patch
  
  ln -s /usr/share/playframework-${pkgver}/play $pkgdir/usr/bin/play
  install -d $pkgdir/usr/bin
  install -d -m755 $pkgdir/usr/share
  install -d $pkgdir/etc/bash_completion.d/
}
